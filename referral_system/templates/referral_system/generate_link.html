{% extends "base.html" %}

{% block title %}Generate Referral Link - Insuraloop{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>Generate Referral Link</h1>
    
    <div class="card">
        <div class="card-body">
            <p>Create a new unique referral link that you can share with potential leads or business partners.</p>
            
            <form method="post">
                {% csrf_token %}
                
                <div class="mb-3">
                    <label for="id_name" class="form-label">Link Name</label>
                    <input type="text" id="id_name" name="name" class="form-control" placeholder="E.g., Summer Campaign, Facebook Link" required>
                    <div class="form-text">A name to help you identify this link</div>
                </div>
                
                <div class="mb-3">
                    <label for="id_partner_name" class="form-label">Partner Name (Optional)</label>
                    <input type="text" id="id_partner_name" name="partner_name" class="form-control" placeholder="E.g., Johnson's Auto Dealership">
                    <div class="form-text">If this link is for a business partner, enter their name</div>
                </div>
                
                <div class="mb-3">
                    <label for="id_insurance_type" class="form-label">Insurance Type</label>
                    <select id="id_insurance_type" name="insurance_type" class="form-select">
                        <option value="auto">Auto Insurance</option>
                        <option value="home">Home Insurance</option>
                        <option value="life">Life Insurance</option>
                        <option value="health">Health Insurance</option>
                        <option value="business">Business Insurance</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="id_source" class="form-label">Referral Source</label>
                    <select id="id_source" name="source" class="form-select">
                        <option value="website">Your Website</option>
                        <option value="email">Email Campaign</option>
                        <option value="social">Social Media</option>
                        <option value="partner">Business Partner</option>
                        <option value="print">Print Materials</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="id_referral_type" class="form-label">Referral Type</label>
                    <select id="id_referral_type" name="referral_type" class="form-select">
                        <option value="business">Business Partner</option>
                        <option value="customer">Existing Customer</option>
                        <option value="agent">Direct from Agent</option>
                    </select>
                </div>
                
                <div class="customer-fields mb-3" style="display: none;">
                    <label for="id_customer_name" class="form-label">Customer Name</label>
                    <input type="text" id="id_customer_name" name="customer_name" class="form-control">
                    
                    <label for="id_customer_email" class="form-label mt-2">Customer Email</label>
                    <input type="email" id="id_customer_email" name="customer_email" class="form-control">
                </div>
                
                <div class="mb-3">
                    <label for="id_notes" class="form-label">Notes (Optional)</label>
                    <textarea id="id_notes" name="notes" class="form-control" rows="3"></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary">Generate Link</button>
            </form>
        </div>
    </div>
    
    <div class="mt-3">
        <a href="{% url 'referral_system:my_referral_links' %}">Back to My Referral Links</a>
    </div>
</div>

{% block extra_js %}
<script>
    document.getElementById('id_referral_type').addEventListener('change', function() {
        var customerFields = document.querySelector('.customer-fields');
        var partnerFields = document.querySelector('.partner-fields');
        
        if (this.value === 'customer') {
            customerFields.style.display = 'block';
            partnerFields.style.display = 'none';
        } else if (this.value === 'business') {
            customerFields.style.display = 'none';
            partnerFields.style.display = 'block';
        } else {
            customerFields.style.display = 'none';
            partnerFields.style.display = 'none';
        }
    });
</script>
{% endblock %}
{% endblock %} 