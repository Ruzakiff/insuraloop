# **Product Requirements Document (PRD) for MVP: Insurance Referral System**

## **1. Overview**
### **1.1 Product Name:**  
**Insuraloop** (Placeholder name)

### **1.2 Purpose & Goals**  
Insuraloop is a **Django-based referral system** that helps insurance agents acquire high-quality leads at a lower cost by **automating referral tracking, lead distribution, and payouts**.  

The MVP will:  
âœ… Enable agents to **generate leads via referrals** (customers, dealerships, mortgage brokers).  
âœ… Provide **trackable referral links** for each agent and partner.  
âœ… Automatically **route leads to the correct agent**.  
âœ… **Sync leads to agentâ€™s CRM** via email/Zapier API.  
âœ… Automate **referral rewards (cash, gift cards, or discounts)**.  

### **1.3 Why This MVP?**  
âœ” Builds **the core infrastructure** (lead intake, tracking, CRM integration).  
âœ” Generates **immediate revenue** for agents.  
âœ” Lays the groundwork for **future features** (automated renewals, lead marketplace).  

---

## **2. System Architecture**
### **2.1 Django Apps in Project**
âœ… **`referralsystem` (Core Referral Functionality)**  
âœ… **`accounts` (User Authentication & Agent Management)**  

---

## **3. Features & Functional Requirements**
### **3.1 Referral System (`referralsystem` app)**
| **Feature** | **Description** | **Priority** |
|------------|---------------|-------------|
| **Referral Link Generator** | Each agent/partner gets a **unique referral link** (e.g., `agentinsurance.com/ref123`). | âœ… High |
| **Lead Capture Form** | A hosted form where referred leads enter **name, phone, email, insurance type**. | âœ… High |
| **QR Code Generation** | QR codes for offline referrals (dealerships, brokers). | âœ… Medium |
| **Lead Assignment & CRM Sync** | New leads are **automatically assigned** to agents and sent via email/Zapier API. | âœ… High |
| **Referral Reward Processing** | Automated payout system (cash, gift cards, or discounts). | âœ… High |
| **Dashboard for Agents** | View incoming leads, track referral performance, pending payouts. | âœ… Medium |

---

### **3.2 Accounts & Authentication (`accounts` app)**
| **Feature** | **Description** | **Priority** |
|------------|---------------|-------------|
| **User Registration/Login** | Agents can **sign up, log in, and manage accounts**. | âœ… High |
| **Business Partner Accounts** | Dealerships/mortgage brokers get **separate referral accounts**. | âœ… Medium |
| **Admin Dashboard** | Superusers can **manage referrals, agents, and payouts**. | âœ… High |

---

## **4. Data Model**
### **4.1 Referral System Models (`referralsystem` app)**
| **Model** | **Fields** | **Description** |
|---------|---------|----------------|
| `ReferralSource` | `id`, `name`, `type`, `email`, `phone`, `agent_assigned` | Stores **who made the referral** (customer, dealership, etc.). |
| `Referral` | `id`, `source`, `lead_name`, `lead_email`, `lead_phone`, `insurance_type`, `status`, `assigned_agent` | Tracks each **lead submitted via referral**. |
| `RewardPayout` | `id`, `referral`, `amount`, `payout_status`, `payment_method` | Logs **referral rewards & payout status**. |

---

### **4.2 User & Accounts Models (`accounts` app)**
| **Model** | **Fields** | **Description** |
|---------|---------|----------------|
| `UserProfile` | `id`, `user`, `role` (agent, partner, admin) | Extends Django's `User` model to include agent roles. |
| `AgentProfile` | `id`, `user`, `agency_name`, `crm_integration` | Stores agent details & CRM sync settings. |

---

## **5. API Endpoints**
### **5.1 Referral API (`referralsystem` app)**
| **Endpoint** | **Method** | **Functionality** |
|------------|---------|---------------|
| `/api/referrals/create/` | `POST` | Capture new referral lead. |
| `/api/referrals/{id}/assign/` | `POST` | Assign a lead to an agent. |
| `/api/referrals/{id}/status/` | `GET` | Get referral status. |
| `/api/rewards/process/` | `POST` | Trigger reward payout. |

---

## **6. Tech Stack**
âœ… **Backend:** Django (Python), PostgreSQL  
âœ… **Frontend:** Simple HTML/CSS (optional React for dashboard later)  
âœ… **Auth:** Django Auth (OAuth2 for CRM integration)  
âœ… **APIs:** Zapier API for CRM sync, Stripe/Plaid for payouts  

---

## **7. Compliance Considerations**
âœ… **Referral rewards must be fixed & not depend on policy purchase.**  
âœ… **Referral sources cannot discuss insurance policy details.**  
âœ… **State-specific caps on referral amounts (e.g., $25 limit in some states).**  

---

## **8. Roadmap**
### **ğŸš€ Phase 1 (4-6 Weeks)**
âœ… Build **Referral System Backend** (tracking, API, payouts).  
âœ… Create **Lead Capture Page** (basic form for leads).  
âœ… Enable **Email & CRM Integration** (Zapier sync).  
âœ… Develop **Agent Dashboard** (view leads & rewards).  

### **ğŸš€ Phase 2 (Post-MVP)**
âœ… Add **QR Code Generator** for offline referrals.  
âœ… Implement **Admin Dashboard** for analytics.  
âœ… Expand **Payment Options** (PayPal, ACH, Stripe).  
âœ… Launch **Business Partner Referral Portal** (for dealerships).  

---

## **9. Next Steps**
1ï¸âƒ£ Do you want **wireframes/mockups** for the agent dashboard & lead capture page?  
2ï¸âƒ£ Should we **prioritize CRM sync first** so agents can use this immediately?  
3ï¸âƒ£ Do you need a **development sprint breakdown** (who builds what & when)?  

ğŸš€ **This PRD covers everything needed for an MVP that delivers real valueâ€”letâ€™s start building!**